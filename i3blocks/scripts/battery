#!/usr/bin/env bash
capacity=$(< /sys/class/power_supply/BAT?/capacity)
_status=$(< /sys/class/power_supply/BAT?/status)
# full_icon=battery-full-charged
low_icon=battery-low

case "$_status" in
    Charging) printf 'C %s%%\n' "$capacity" ;;
    Not?charging) printf 'U %s%%\n' "$capacity" ;;
    *)
        if [ "$capacity" -lt 20 ];then
            notify-send -u critical -i "$low_icon" \
                "Battery discharging!" "$(acpi)"
        fi
        printf 'D %s%%\n' "$capacity"
    ;;
esac
