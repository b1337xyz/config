#!/usr/bin/env bash
capacity=$(< /sys/class/power_supply/BAT?/capacity)
status=$(< /sys/class/power_supply/BAT?/status)

case "$status" in
    Disc*)
        [ "$capacity" -lt 20 ] &&
            notify-send -u critical -i battery-low "Battery low!!!" "$(acpi)"
        printf 'D %s%%\n' "$capacity"
    ;;
    Char*) printf 'C %s%%\n' "$capacity" ;;
    *) printf 'U %s%%\n' "$capacity" ;;
esac
