#!/usr/bin/env bash
capacity=$(< /sys/class/power_supply/BAT?/capacity)
status=$(< /sys/class/power_supply/BAT?/status)

case "$status" in
    Disc*)
        if [ "$capacity" -lt 20 ]; then
            notify-send -r 3939 -i battery-low "Battery low!!!" "$(acpi)"
            printf '<span background="#f05050"> 󰁾 %s%% </span>\n' "$capacity"
        else
            printf '󰁾 %s%%\n' "$capacity"
        fi
    ;;
    Char*) printf '󰂄 %s%%\n' "$capacity" ;;
    *) printf '󰂑 %s%%\n' "$capacity" ;;
esac
